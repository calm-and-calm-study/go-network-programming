
## 신뢰성 있는 TCP 데이터 스트림

- TCP 연결 과정 중 핸드셰이크의 절차, 번호 순서, 승인, 재전송 및 기타 기능
- Go 언어를 사용하여 TCP 세션 수립부터 종료 단계까지 구현
- 타임아웃과 일시적인 에러 상황에 대해 어떻게 발견하고 처리하여 사용자의 경험을 해치지 않는지를 알아볼 것
- 사전에 불안정한 네트워크 연결을 탐지하는 방법에 대해 알아볼 것

<br />

### 타임아웃과 일시적인 에러 이해하기

- Timeout : 운영체제에서 리소스를 일시적으로 사용할 수 없거나 함수 호출이 차단되거나 연결시간이 초과된 경우 Timeout 메서드에서 true 를 반환

- Temporary : 운영체제의 리소스 제한을 초과하는 경우 발생

- 에러가 일시적인지 확인하기 위한 net.Error 타입 어설션
    ```go
    if nErr, ok := err.(net.Error); ok && !nErr.Temporary() { return err}
    ```

- Dial 함수를 이용할 때에는 각 연결 시도의 타임아웃을 운영체제에 설정된 타임아웃에 의존해야 함
- 따라서 DialTimeout 함수를 사용하여 타임아웃을 애플리케이션에서 명시할 수 있음
- 여러 IP 주소로 해석되는 호스트에 다이얼 시 Go 에서는 각 IP 주소 중 먼저 연결되는 주소를 기본 IP 주소로 연결을 시도
- 첫 번째로 성공한 연결 시도에 대한 연결만 유지되고 그 외의 모든 연결 시도는 취소됨


<br />

### 데드라인 구현하기

- 데드라인은 아무런 패킷도 오고 가지 않은 채로 네트워크 연결이 얼마나 유휴 상태로 지속할 수 있는지를 제어
- Go 의 네트워크 연결은 기본적으로 읽기와 쓰기 동작에 대해 데드라인을 설정하지 않음
- 네트워크 연결이 유휴 상태로 끊기지 않고 아주 오랜 시간 존재할 수 있으니 필수적으로 데드라인을 지정해야 함



- websocket timeout , ping pong handler 알아보기