# TLS를 사용한 통신 보안

- TLS (Transport Layer Security) 프로토콜은 클라이어늩와 서버 간에 안전한 통신을 제공
- TLS 는 클라이언트가 정말 올바른 서버에서 온 것인지 인증
- TLS 를 통하여 서버와의 통신을 암호화하여 제 3자가 통신을 가로채도 조작을 할 수 없게 함

<br />

### TLS 요청 전달 과정

- Client
  - google.com 버전 1.3의 TLS 사용하여 통신 요청
  - 암호화 방식 목록 전송
  - 공개키와 비밀키 생성
  - 공개키 전송

- Server
  - 버전 1.3의 TLS 연결 승인
  - AES-GCM 방식의 암호화 방식 선택
  - 공개키와 비밀키 생성
  - 공개키와 인증서를 전송
  - TLS 버전 정보의 32바이트 값을 전송
  - Client 의 공개키로부터 시그니처와 함께 메시지 인증코드를 전송

- Client
  - 신뢰하는 인증 기관의 서버의 인증서 -> google.com 신뢰
  - 클라이언트의 비밀키를 사용하여 서버의 시그니처로부터 대칭키를 만들어서 응답을 조사
  - 메시지 인증 코드 확인
  - 응답으로 온 32 바이트 -> TLS 1.3 이 유지된 채로 연결

- Server, Client 모두 메시지를 전송하기 전에 메시지의 Payload 를 TLS 로 캡슐화를 진행

<br />

### 순방향 보안

- TLS 1.3 은 DH 키 교환 알고리즘이 적용되어 있음
- 이 알고리즘은 한 세션 동안 사용할 클라이언트와 서버 키 페어와 새로운 대칭키를 생성
- 세션이 종료되면 클라이언트와 서버는 세션에서 사용한 키를 모두 버림



